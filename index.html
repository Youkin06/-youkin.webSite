<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM_ACCESS: PERSONAL_LOG</title>
    <style>
        /* 全体のスタイル */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000000;
            color: #00ff00;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 1.1em;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
            cursor: text;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .background-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(0deg, transparent 24%, rgba(0,255,0,0.05) 25%, rgba(0,255,0,0.05) 26%, transparent 27%, transparent 74%, rgba(0,255,0,0.05) 75%, rgba(0,255,0,0.05) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0,255,0,0.05) 25%, rgba(0,255,0,0.05) 26%, transparent 27%, transparent 74%, rgba(0,255,0,0.05) 75%, rgba(0,255,0,0.05) 76%, transparent 77%, transparent);
            background-size: 50px 50px;
            opacity: 0.1;
            z-index: 0;
        }

        .terminal-container {
            width: 90%;
            max-width: 900px;
            height: 80vh;
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #00cc00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        #output {
            width: 100%;
        }

        #output > div {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt, .typed-text {
            color: #00ff00;
        }
        
        .cursor {
            display: inline-block;
            background-color: #00ff00;
            width: 10px;
            height: 1.1em;
            vertical-align: middle;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .hidden-input {
            position: absolute;
            width: 1px;
            height: 1px;
            top: -9999px;
            left: -9999px;
            opacity: 0;
            pointer-events: none;
        }
        
        /* --- エフェクト用スタイル --- */
        .glitch { animation: textGlitch 0.3s infinite alternate; }
        @keyframes textGlitch {
            0% { text-shadow: 0 0 1px #00ff00, 1px -1px 0px #ff00ff; }
            100% { text-shadow: 0 0 1px #00ff00, -1px 1px 0px #00ffff; }
        }
        .error-line { color: #ff3333; font-weight: bold; text-shadow: 0 0 5px #ff0000; }
        .highlight { color: #ffff00; }
        .comment { color: #888; }

        /* ★★★ 修正点 ★★★ */
        /* --- スマートフォン向けの表示調整 --- */
        @media (max-width: 768px) {
            body {
                /* フルスクリーン表示にするため、中央揃えを解除 */
                display: block;
            }
            .terminal-container {
                width: 100%;
                max-width: 100%;
                /* dvhはDynamic Viewport Heightの略。
                  キーボード表示時など、表示領域のサイズが変わると高さが自動で追従する。
                */
                height: 100dvh;
                border: none;
                box-shadow: none;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="background-grid"></div>
    <div class="terminal-container" id="terminal">
        <div id="output"></div>
    </div>
    <input type="text" class="hidden-input" id="hiddenInput" autofocus autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

    <script>
        const terminal = document.getElementById('terminal');
        const outputDiv = document.getElementById('output');
        const hiddenInput = document.getElementById('hiddenInput');

        let commandHistory = [];
        let historyIndex = -1;
        let currentLanguage = 'ja';
        let languageSelectionMode = false;
        let isExiting = false;

        // --- データ定義 ---
        const personalData = {
            name: { ja: "八百井 陽平", en: "Yohei Yaoi" },
            profile: {
                ja: "私は、コードとアートの境界を探求する観察者です。未知のシステムを解析し、次元間のデータを収集しています。特に、複雑なロジックと奇妙なインターフェースの構築に情熱を注いでいます。",
                en: "I am an observer who explores the boundaries between code and art. I analyze unknown systems and collect interdimensional data. I am particularly passionate about building complex logic and peculiar interfaces."
            },
            timeline: {
                en: [
                    "/* 2006 June 7: Yohei Yaoi was born into this dimension */",
                    "// EVENT: EXISTENCE_MANIFESTATION_OCCURRED (INITIAL_LOG)",
                    "// ACTION: DATA_STREAM_COLLECTION_INITIATED (PHASE_1)",
                    "// ALERT: ANOMALY_DETECTED_IN_TIME_FLOW (STATUS: ONGOING)",
                    "/* LOG: TEMPORAL_SHIFT_OBSERVED (DATE: 20XX_Q3) */",
                    "// PROJECT: SELF_REFERENCE_MATRIX_CONSTRUCTION (STATUS: 87% COMPLETE)",
                    "// NOTE: EXTERNAL_ENTITIES_MONITORING_PROCESS (HIGH_PRIORITY)",
                    "/* CURRENT_STATUS: SYSTEM_STABLE_BUT_COMPROMISED */"
                ]
            },
            game: { title: "謎の空間探査ゲーム「クロノス・パス」", link: "https://example.com/your-game" }
        };

        // --- コマンド定義 ---
        const commands = {
            'help': {
                ja: `<span class="comment">// 利用可能なコマンド:</span>
<span class="highlight">help</span>     - コマンドリストを表示
<span class="highlight">name</span>     - ユーザー名を表示
<span class="highlight">profile</span>  - 自己紹介を表示
<span class="highlight">timeline</span> - 年表を表示
<span class="highlight">game</span>     - 作成ゲームの情報を表示
<span class="highlight">language</span> - 言語設定を変更
<span class="highlight">clear</span>    - 画面をクリア
<span class="highlight">exit</span>     - セッションを終了`,
                en: `<span class="comment">// Available Commands:</span>
<span class="highlight">help</span>     - Display command list
<span class="highlight">name</span>     - Display user name
<span class="highlight">profile</span>  - Show personal profile
<span class="highlight">timeline</span> - Show timeline
<span class="highlight">game</span>     - Show info about created games
<span class="highlight">language</span> - Change language setting
<span class="highlight">clear</span>    - Clear the screen
<span class="highlight">exit</span>     - Close the session`
            },
            'name': {
                ja: `<span class="comment">// 名前データを取得中...</span>
<span class="glitch">データベース0x01にアクセス中...</span>
名前フィールド: '${personalData.name.ja}'
<span class="error-line">エラー: データ整合性チェック失敗 (コード: 0xDEADBEEF)</span>`,
                en: `<span class="comment">// Retrieving NAME data...</span>
<span class="glitch">Accessing_Database_0x01...</span>
NAME_FIELD: '${personalData.name.en}'
<span class="error-line">ERROR: DATA_INTEGRITY_CHECK_FAILED (CODE: 0xDEADBEEF)</span>`
            },
            'profile': {
                ja: `<span class="comment">// プロファイル情報を取得中...</span>
<span class="glitch">個人データキャッシュをスキャン中...</span>
${personalData.profile.ja}
<span class="error-line">エラー: 認証レベル不足 (CODE: 401)</span>`,
                en: `<span class="comment">// Retrieving PROFILE data...</span>
<span class="glitch">Scanning_Personal_Data_Cache...</span>
${personalData.profile.en}
<span class="error-line">ERROR: INSUFFICIENT_AUTHENTICATION_LEVEL (CODE: 401)</span>`
            },
            'timeline': {
                en: `<span class="comment">// Fetching CHRONOLOGICAL_LOGS...</span>
<span class="glitch">Decoding_Encrypted_Fragments...</span>
${personalData.timeline.en.join('<br>')}
<span class="error-line">CRITICAL_ERROR: LOG_FRAGMENT_MISSING (ID: F9F9F9)</span>`
            },
            'game': {
                ja: `<span class="comment">// ゲーム情報を取得中...</span>
<span class="glitch">メタデータを解析中...</span>
タイトル: '${personalData.game.title}'
リンク: <a href="${personalData.game.link}" target="_blank" style="color:#00ffff;">${personalData.game.link}</a>
<span class="error-line">警告: 外部リンクへの接続 (推奨度: 低)</span>`,
                en: `<span class="comment">// Retrieving GAME data...</span>
<span class="glitch">Parsing_Metadata...</span>
TITLE: '${personalData.game.title}'
LINK: <a href="${personalData.game.link}" target="_blank" style="color:#00ffff;">${personalData.game.link}</a>
<span class="error-line">WARNING: CONNECTION_TO_EXTERNAL_LINK (RECOMMENDATION: LOW)</span>`
            },
            'language': {
                ja: `使用したい言語を次のコマンドから選んで入力してください: <span class="highlight">ja</span> (日本語), <span class="highlight">en</span> (English)`,
                en: `Please choose your desired language from the following commands: <span class="highlight">ja</span> (Japanese), <span class="highlight">en</span> (English)`
            },
            'clear': () => { outputDiv.innerHTML = ''; },
            'exit': {
                ja: `<span class="error-line">システムシャットダウンを開始します...</span>`,
                en: `<span class="error-line">SYSTEM SHUTDOWN INITIATED...</span>`
            }
        };
        
        // --- メインロジック ---

        function addLine(htmlContent) {
            const line = document.createElement('div');
            line.innerHTML = htmlContent;
            outputDiv.appendChild(line);

            while (outputDiv.scrollHeight > terminal.clientHeight && outputDiv.children.length > 0) {
                outputDiv.removeChild(outputDiv.firstElementChild);
            }
        }

        function promptManager() {
            let currentPromptLine = null;
            let typedTextSpan = null;

            this.newPrompt = function() {
                if (currentPromptLine) {
                    currentPromptLine.querySelector('.cursor')?.remove();
                }
                const promptHTML = `<span class="prompt">> </span><span class="typed-text"></span><span class="cursor"></span>`;
                addLine(promptHTML);
                currentPromptLine = outputDiv.lastElementChild;
                typedTextSpan = currentPromptLine.querySelector('.typed-text');
            };
            
            this.updateText = function(text) {
                if(typedTextSpan) {
                    typedTextSpan.textContent = text;
                }
            };
            
            this.finalize = function(command) {
                if (currentPromptLine) {
                     currentPromptLine.innerHTML = `<span class="prompt">> </span>${command}`;
                }
            }
        }

        const prompt = new promptManager();

        hiddenInput.addEventListener('input', () => {
            if (isExiting) return;
            prompt.updateText(hiddenInput.value);
        });

        hiddenInput.addEventListener('keydown', (e) => {
            if (isExiting) {
                e.preventDefault();
                return;
            }

            if (e.key === 'Enter') {
                e.preventDefault();
                const command = hiddenInput.value.trim();

                if(command) {
                    commandHistory.unshift(command);
                    historyIndex = -1;
                }

                prompt.finalize(command);
                processCommand(command);
                
                if (!isExiting) {
                    prompt.newPrompt();
                    hiddenInput.value = '';
                    prompt.updateText('');
                }

            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if(historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    hiddenInput.value = commandHistory[historyIndex];
                    prompt.updateText(hiddenInput.value);
                }
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                 if(historyIndex > 0) {
                    historyIndex--;
                    hiddenInput.value = commandHistory[historyIndex];
                    prompt.updateText(hiddenInput.value);
                } else {
                    historyIndex = -1;
                    hiddenInput.value = '';
                    prompt.updateText('');
                }
            }
        });
        
        function processCommand(command) {
            const cmdLower = command.toLowerCase();

            if (languageSelectionMode) {
                if (cmdLower === 'ja' || cmdLower === 'en') {
                    currentLanguage = cmdLower;
                    addLine(`<span class="comment">// Language set to ${cmdLower}.</span>`);
                } else {
                    addLine(`<span class="error-line">ERROR: Unknown language code.</span>`);
                }
                languageSelectionMode = false;
                return;
            }

            const commandDef = commands[cmdLower];
            let output = '';

            if (typeof commandDef === 'function') {
                commandDef();
                return;
            } else if (commandDef) {
                if (cmdLower === 'timeline') {
                    output = commandDef['en'];
                } else {
                    output = commandDef[currentLanguage] || commandDef['en'] || commandDef;
                }
            } else if (command !== '') {
                output = `<span class="error-line">COMMAND NOT FOUND: ${command}</span>`;
            }

            if (output) {
                addLine(output);
            }

            if (cmdLower === 'language') {
                languageSelectionMode = true;
            }

            if (cmdLower === 'exit') {
                isExiting = true;
                hiddenInput.blur();
                setTimeout(() => location.reload(), 2000);
            }
        }
        
        document.body.addEventListener('click', () => {
            if (!isExiting) {
                hiddenInput.focus();
            }
        });

        // 初期表示
        addLine("SYSTEM BOOT COMPLETE. TYPE 'help' FOR COMMANDS.");
        prompt.newPrompt();
    </script>
</body>
</html>
