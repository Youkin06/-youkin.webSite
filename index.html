<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM_ACCESS: PERSONAL_LOG</title>
    <style>
        /* 全体のスタイル */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000000;
            color: #00ff00;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 1.1em;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
            cursor: text;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .background-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(0deg, transparent 24%, rgba(0,255,0,0.05) 25%, rgba(0,255,0,0.05) 26%, transparent 27%, transparent 74%, rgba(0,255,0,0.05) 75%, rgba(0,255,0,0.05) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(0,255,0,0.05) 25%, rgba(0,255,0,0.05) 26%, transparent 27%, transparent 74%, rgba(0,255,0,0.05) 75%, rgba(0,255,0,0.05) 76%, transparent 77%, transparent);
            background-size: 50px 50px;
            opacity: 0.1;
            z-index: 0;
        }

        .terminal-container {
            width: 90%;
            max-width: 900px;
            height: 80vh;
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #00cc00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        /* ★★★ 修正点 ★★★ */
        /* 正しいコンテナID(#output-container)に対してスタイルを適用 */
        #output-container > div {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .prompt, .typed-text {
            color: #00ff00;
        }
        
        .cursor {
            display: inline-block;
            background-color: #00ff00;
            width: 10px;
            height: 1.1em;
            vertical-align: middle;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .hidden-input {
            position: absolute;
            width: 1px;
            height: 1px;
            top: -9999px;
            left: -9999px;
            opacity: 0;
            pointer-events: none;
        }
        
        /* エフェクト用スタイル */
        .glitch { animation: textGlitch 0.3s infinite alternate; }
        @keyframes textGlitch {
            0% { text-shadow: 0 0 1px #00ff00, 1px -1px 0px #ff00ff; }
            100% { text-shadow: 0 0 1px #00ff00, -1px 1px 0px #00ffff; }
        }
        .error-line { color: #ff3333; font-weight: bold; text-shadow: 0 0 5px #ff0000; }
        .highlight { color: #ffff00; }
        .comment { color: #888; }

        @media (max-width: 768px) {
            body { display: block; }
            .terminal-container {
                width: 100%;
                max-width: 100%;
                height: 100dvh;
                border: none;
                box-shadow: none;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="background-grid"></div>
    <div class="terminal-container" id="terminal">
        <div id="prompt-container"></div>
        <div id="output-container"></div>
    </div>
    <input type="text" class="hidden-input" id="hiddenInput" autofocus autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

    <script>
        const terminal = document.getElementById('terminal');
        const promptContainer = document.getElementById('prompt-container');
        const outputContainer = document.getElementById('output-container');
        const hiddenInput = document.getElementById('hiddenInput');

        let commandHistory = [];
        let historyIndex = -1;
        let currentLanguage = 'ja';
        let languageSelectionMode = false;
        let isExiting = false;

        // --- データ定義 ---
        const personalData = {
            name: { ja: "八百井 陽平", en: "Yohei Yaoi" },
            profile: {
                ja: "私は、コードとアートの境界を探求する観察者です。未知のシステムを解析し、次元間のデータを収集しています。特に、複雑なロジックと奇妙なインターフェースの構築に情熱を注いでいます。",
                en: "I am an observer who explores the boundaries between code and art. I analyze unknown systems and collect interdimensional data. I am particularly passionate about building complex logic and peculiar interfaces."
            },
            timeline: {
                en: [
                    "/* 2006 June 7: Yohei Yaoi was born into this dimension */",
                    "// EVENT: EXISTENCE_MANIFESTATION_OCCURRED (INITIAL_LOG)",
                    "// ACTION: DATA_STREAM_COLLECTION_INITIATED (PHASE_1)",
                    "// ALERT: ANOMALY_DETECTED_IN_TIME_FLOW (STATUS: ONGOING)",
                    "/* LOG: TEMPORAL_SHIFT_OBSERVED (DATE: 20XX_Q3) */",
                    "// PROJECT: SELF_REFERENCE_MATRIX_CONSTRUCTION (STATUS: 87% COMPLETE)",
                    "// NOTE: EXTERNAL_ENTITIES_MONITORING_PROCESS (HIGH_PRIORITY)",
                    "/* CURRENT_STATUS: SYSTEM_STABLE_BUT_COMPROMISED */"
                ]
            },
            game: { title: "謎の空間探査ゲーム「クロノス・パス」", link: "https://example.com/your-game" }
        };

        // --- コマンド定義 ---
        const commands = {
            'help': {
                ja: `<span class="comment">// 利用可能なコマンド:</span>
<span class="highlight">help</span>     - コマンドリストを表示
<span class="highlight">name</span>     - ユーザー名を表示
<span class="highlight">profile</span>  - 自己紹介を表示
<span class="highlight">timeline</span> - 年表を表示
<span class="highlight">game</span>     - 作成ゲームの情報を表示
<span class="highlight">language</span> - 言語設定を変更
<span class="highlight">clear</span>    - 画面をクリア
<span class="highlight">exit</span>     - セッションを終了`,
                en: `<span class="comment">// Available Commands:</span>
<span class="highlight">help</span>     - Display command list
<span class="highlight">name</span>     - Display user name
<span class="highlight">profile</span>  - Show personal profile
<span class="highlight">timeline</span> - Show timeline
<span class="highlight">game</span>     - Show info about created games
<span class="highlight">language</span> - Change language setting
<span class="highlight">clear</span>    - Clear the screen
<span class="highlight">exit</span>     - Close the session`
            },
            'name': { ja: `<span class="comment">// 名前データを取得中...</span>\n<span class="glitch">データベース0x01にアクセス中...</span>\n名前フィールド: '${personalData.name.ja}'\n<span class="error-line">エラー: データ整合性チェック失敗 (コード: 0xDEADBEEF)</span>`, en: `<span class="comment">// Retrieving NAME data...</span>\n<span class="glitch">Accessing_Database_0x01...</span>\nNAME_FIELD: '${personalData.name.en}'\n<span class="error-line">ERROR: DATA_INTEGRITY_CHECK_FAILED (CODE: 0xDEADBEEF)</span>` },
            'profile': { ja: `<span class="comment">// プロファイル情報を取得中...</span>\n<span class="glitch">個人データキャッシュをスキャン中...</span>\n${personalData.profile.ja}\n<span class="error-line">エラー: 認証レベル不足 (CODE: 401)</span>`, en: `<span class="comment">// Retrieving PROFILE data...</span>\n<span class="glitch">Scanning_Personal_Data_Cache...</span>\n${personalData.profile.en}\n<span class="error-line">ERROR: INSUFFICIENT_AUTHENTICATION_LEVEL (CODE: 401)</span>` },
            'timeline': { en: `<span class="comment">// Fetching CHRONOLOGICAL_LOGS...</span>\n<span class="glitch">Decoding_Encrypted_Fragments...</span>\n${personalData.timeline.en.join('<br>')}\n<span class="error-line">CRITICAL_ERROR: LOG_FRAGMENT_MISSING (ID: F9F9F9)</span>` },
            'game': { ja: `<span class="comment">// ゲーム情報を取得中...</span>\n<span class="glitch">メタデータを解析中...</span>\nタイトル: '${personalData.game.title}'\nリンク: <a href="${personalData.game.link}" target="_blank" style="color:#00ffff;">${personalData.game.link}</a>\n<span class="error-line">警告: 外部リンクへの接続 (推奨度: 低)</span>`, en: `<span class="comment">// Retrieving GAME data...</span>\n<span class="glitch">Parsing_Metadata...</span>\nTITLE: '${personalData.game.title}'\nLINK: <a href="${personalData.game.link}" target="_blank" style="color:#00ffff;">${personalData.game.link}</a>\n<span class="error-line">WARNING: CONNECTION_TO_EXTERNAL_LINK (RECOMMENDATION: LOW)</span>` },
            'language': { ja: `使用したい言語を次のコマンドから選んで入力してください: <span class="highlight">ja</span> (日本語), <span class="highlight">en</span> (English)`, en: `Please choose your desired language from the following commands: <span class="highlight">ja</span> (Japanese), <span class="highlight">en</span> (English)` },
            'clear': () => { outputContainer.innerHTML = ''; },
            'exit': { ja: `<span class="error-line">システムシャットダウンを開始します...</span>`, en: `<span class="error-line">SYSTEM SHUTDOWN INITIATED...</span>` }
        };
        
        // --- メインロジック ---
        
        function addOutputLine(htmlContent) {
            const line = document.createElement('div');
            line.innerHTML = htmlContent;
            outputContainer.insertBefore(line, outputContainer.firstChild);

            while (terminal.scrollHeight > terminal.clientHeight && outputContainer.children.length > 0) {
                 outputContainer.removeChild(outputContainer.lastElementChild);
            }
        }
        
        const typedTextSpan = document.createElement('span');
        typedTextSpan.className = 'typed-text';
        promptContainer.innerHTML = `<span class="prompt">> </span>`;
        promptContainer.appendChild(typedTextSpan);
        promptContainer.insertAdjacentHTML('beforeend', `<span class="cursor"></span>`);

        hiddenInput.addEventListener('input', () => {
            if (isExiting) return;
            typedTextSpan.textContent = hiddenInput.value;
        });

        hiddenInput.addEventListener('keydown', (e) => {
            if (isExiting) { e.preventDefault(); return; }

            const keyAction = {
                'Enter': () => {
                    e.preventDefault();
                    const command = hiddenInput.value.trim();
                    if(command) {
                        commandHistory.unshift(command);
                        historyIndex = -1;
                    }
                    // 実行したコマンドは、出力の先頭に追加する
                    addOutputLine(`<span class="prompt">> </span>${command}`);
                    processCommand(command);
                    hiddenInput.value = '';
                    typedTextSpan.textContent = '';
                },
                'ArrowUp': () => {
                    e.preventDefault();
                    if(historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        hiddenInput.value = commandHistory[historyIndex];
                        typedTextSpan.textContent = hiddenInput.value;
                    }
                },
                'ArrowDown': () => {
                    e.preventDefault();
                    if(historyIndex > 0) {
                        historyIndex--;
                        hiddenInput.value = commandHistory[historyIndex];
                        typedTextSpan.textContent = hiddenInput.value;
                    } else {
                        historyIndex = -1;
                        hiddenInput.value = '';
                        typedTextSpan.textContent = '';
                    }
                }
            };
            if (keyAction[e.key]) keyAction[e.key]();
        });
        
        function processCommand(command) {
            const cmdLower = command.toLowerCase();

            if (languageSelectionMode) {
                if (cmdLower === 'ja' || cmdLower === 'en') {
                    currentLanguage = cmdLower;
                    addOutputLine(`<span class="comment">// Language set to ${cmdLower}.</span>`);
                } else {
                    addOutputLine(`<span class="error-line">ERROR: Unknown language code.</span>`);
                }
                languageSelectionMode = false;
                return;
            }

            const commandDef = commands[cmdLower];
            let output = '';

            if (typeof commandDef === 'function') {
                commandDef();
                return;
            } else if (commandDef) {
                if (cmdLower === 'timeline') output = commandDef['en'];
                else output = commandDef[currentLanguage] || commandDef['en'] || commandDef;
            } else if (command !== '') {
                output = `<span class="error-line">COMMAND NOT FOUND: ${command}</span>`;
            }

            if (output) addOutputLine(output);
            if (cmdLower === 'language') languageSelectionMode = true;
            if (cmdLower === 'exit') {
                isExiting = true;
                hiddenInput.blur();
                setTimeout(() => location.reload(), 2000);
            }
        }
        
        document.body.addEventListener('click', () => {
            if (!isExiting) hiddenInput.focus();
        });

        // 初期表示
        addOutputLine("SYSTEM BOOT COMPLETE. TYPE 'help' FOR COMMANDS.");

    </script>
</body>
</html>
